<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–°–≤–µ—Ä–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ...</title>
    <link rel="stylesheet" href="/static/css/modern-style.css">
    <link rel="icon" type="image/png"
        href="{{ url_for('static', path='img/omega-logo.png') }}">
    <script>
        // –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
        const intervalId = setInterval(function() {
            console.log("–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–≤–µ—Ä–∫–∏...");
            fetch("/sverka/status/{{ task_id }}")
                .then(resp => resp.json())
                .then(data => {
                    console.log("–°—Ç–∞—Ç—É—Å:", data.status);
                    
                    if (data.status === "completed" || data.status === "error") {
                        clearInterval(intervalId);
                        console.log("–†–µ–∑—É–ª—å—Ç–∞—Ç –≥–æ—Ç–æ–≤, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞");
                        // –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≥–æ—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        window.location.href = "/sverka/result/{{ task_id }}";
                    }
                })
                .catch(err => {
                    console.error("–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:", err);
                });
        }, 3000);
    </script>
</head>
<body>
    {% include "auth/header_auth.html" %}
    <div class="container">
        <div class="card">
            <h1>‚è≥ –°–≤–µ—Ä–∫–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ</h1>
            <p class="subtitle">–ò–ò –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∑—é–º–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –≤–∞–∫–∞–Ω—Å–∏–∏</p>
            
            <div class="progress-container">
                <div class="spinner"></div>
                <h3>ü§ñ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ...</h3>
                <p>–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
                <span class="status-badge status-processing">–û–±—Ä–∞–±–æ—Ç–∫–∞</span>
            </div>
            
        </div>
    </div>
</body>
</html>
